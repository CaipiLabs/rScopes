/*!
 * MIT License
 * 
 * Copyright (c) 2018 Wise Wild Web
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=15)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("rescope")},function(e,t){e.exports=require("is")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@babel/runtime/helpers/get")},function(e,t){e.exports=require("rescope-spells")},function(e,t,n){"use strict";var o=n(13),r=n.n(o),s=n(14),i=n.n(s),p=n(10),c=n.n(p),a=n(9),u=n.n(a),f=n(3),l=n.n(f),h=n(5),d=n.n(h),m=n(6),$=n.n(m),y=n(7),S=n.n(y),g=n(4),v=n.n(g),b=n(8),C=n.n(b),P=n(2),w=n.n(P),_=n(0),O=n.n(_),R=n(1),x=n(11),j=n.n(x);function k(e,t,n){return w.a.string(t)&&(t=t.split(".")),t.length?e[t[0]]&&k(e[t[0]],t.slice(1)):e}function E(e){var t=e.split(":");return t[0]=t[0].split("."),t[1]=t[1]&&t[1].split("."),{pathFrom:t[0],pathTo:t[1]||[t[0][t[0].length-1]]}}function q(e){return e.prototype instanceof O.a.Component||e===O.a.Component||e.$$typeof||w.a.fn(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"h",(function(){return z})),n.d(t,"a",(function(){return z})),n.d(t,"l",(function(){return z})),n.d(t,"t",(function(){return z})),n.d(t,"p",(function(){return B})),n.d(t,"s",(function(){return B})),n.d(t,"o",(function(){return F})),n.d(t,"r",(function(){return F})),n.d(t,"g",(function(){return F})),n.d(t,"j",(function(){return I})),n.d(t,"i",(function(){return I})),n.d(t,"k",(function(){return L})),n.d(t,"f",(function(){return G})),n.d(t,"e",(function(){return H})),n.d(t,"d",(function(){return J})),n.d(t,"u",(function(){return K})),n.d(t,"q",(function(){return G})),n.d(t,"n",(function(){return H})),n.d(t,"m",(function(){return J})),n.d(t,"c",(function(){return R.Store})),n.d(t,"b",(function(){return R.Scope}));var U={}.constructor,W=Object(_.createContext)(R.Store.staticScope),D=W.Provider,M=W.Consumer,A={toProps:String.fromCharCode(9889),fromProps:"",rs:String.fromCharCode(55357,56599)};function F(){for(var e,t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var s=(!o[0]||q(o[0]))&&o.shift(),i=(!o[0]||R.Scope.isScope(o[0]))&&o.shift(),p=(!o[0]||w.a.array(o[0])||o[0]instanceof U)&&o.shift();if(!p)for(p=[];w.a.string(o[0]);)p.push(o.shift());if(!s)return function(e){return F(e,i,p)};var c=s.displayName||s.name,a=B((t=e=function(e){function t(){return d()(this,t),S()(this,v()(t).apply(this,arguments))}return C()(t,e),$()(t,[{key:"render",value:function(){return O.a.createElement(s,l()({},this.props,this.state,{ref:this.props.forwardedRef,$dispatch:this.$dispatch,$actions:this.$actions,$scope:this.$scope,$stores:this.$stores}))}}]),t}(O.a.Component),e._originComponent=s._originComponent||s,e.displayName=A.toProps+c,t),w.a.fn(i)&&i,p),u=O.a.forwardRef((function(e,t){return O.a.createElement(a,l()({},e,{forwardedRef:t}))}));return u.displayName=A.toProps+c,u._originComponent=s,u=(i||!s._originComponent)&&z(!w.a.fn(i)&&i)(u)||u}function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(!t[0]||q(t[0]))&&t.shift(),r=(!t[0]||R.Scope.isScope(t[0]))&&t.shift(),s=(!t[0]||w.a.array(t[0]))&&t.shift(),p=!s&&(!t[0]||t[0]instanceof U)&&t.shift(),a={};if(!s&&w.a.string(t[0]))for(s=[];w.a.string(t[0]);)s.push(t.shift());if(!o)return function(e){return B(e,r,s,p)};var f=o.displayName||o.name;s=[].concat(u()(o.use||[]),u()(s||[])),p&&R.Scope.stateMapToRefList(p,a,s);var l=function(e){function t(e,n,o){var p;return d()(this,t),(p=S()(this,v()(t).call(this,e,n,o)))._scopeWillUpdate=function(e){p.scopeWillUpdate&&p.scopeWillUpdate(e,p.$stores),p.applyScopeUpdate&&(e=p.applyScopeUpdate(e,p.$stores)),p.setState(e)},w.a.fn(r)?p.$scope=r(i()(p),p.props,{rescope:e.$scope}):p.$scope=e.$scope,p.$scope&&p.$scope.dead&&(console.error("ReScoping using dead scope !"),p.$scope=null),p.$stores=p.$scope&&p.$scope.stores,p.$actions=p.$scope&&p.$scope.actions,p.$scope&&s.length?p.state=T({},p.state,{},a,{},p.$scope.map(i()(p),s,!1)):p.$scope||console.warn("No Scope found in ".concat(f)),p}return C()(t,e),$()(t,[{key:"componentDidMount",value:function(){s.length&&this.$scope&&this.$scope.bind(this._scopeWillUpdate,s,!1),c()(v()(t.prototype),"componentDidMount",this)&&c()(v()(t.prototype),"componentDidMount",this).call(this)}},{key:"componentDidUpdate",value:function(e){var t=e.$scope;t!==this.$scope&&(w.a.fn(r)&&(t=r(this,this.props,{rescope:t})),s.length&&this.$scope.unBind(this._scopeWillUpdate,s),this.$scope=t,this.$scope&&this.$scope.dead?(console.error("ReScoping using dead scope"),this.$actions=this.$stores=this.$scope=null):(this.$actions=this.$scope.actions,this.$stores=this.$scope.stores,s.length&&t.bind(this._scopeWillUpdate,s)))}},{key:"componentWillUnmount",value:function(){c()(v()(t.prototype),"componentWillUnmount",this)&&c()(v()(t.prototype),"componentWillUnmount",this).call(this),this.$scope&&!this.$scope.dead&&s.length&&this.$scope.unBind(this._scopeWillUpdate,s)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.$scope;return n&&s.length?n.map(this,s,!1):null}}]),t}(o);return l._originComponent=o._originComponent||o,l.defaultProps=T({},o.defaultProps||{}),l.displayName=f,(r||!o._originComponent)&&z(!w.a.fn(r)&&r)(l)||l}function z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(!t[0]||q(t[0]))&&t.shift(),r=(!t[0]||R.Scope.isScope(t[0]))&&t.shift(),s=(!t[0]||t[0]instanceof U&&!R.Scope.isScope(t[0]))&&t.shift(),i=(!t[0]||t[0]instanceof U)&&t.shift()||{};if(!o)return function(e){return z(e,r,s,i)};var p=o.displayName||o.name,c=function(e){function t(){return d()(this,t),S()(this,v()(t).apply(this,arguments))}return C()(t,e),$()(t,[{key:"componentWillUnmount",value:function(){this.$scope&&this.$scope.dispose("hoc")}},{key:"render",value:function(){var e=this,t=r||this.props.$scope;return t?(this.$scope&&t===this.$scope.parent||(this.$scope&&this.$scope.dispose("hoc"),this.$scope=t,this.$scope&&this.$scope.retain("hoc")),O.a.createElement(D,{value:this.$scope},O.a.createElement(o,l()({},this.props,{ref:this.props.forwardedRef,$actions:this.$scope.actions,$scope:this.$scope,$stores:this.$scope.stores})))):O.a.createElement(M,null,(function(t){return!(t=t||R.Store.staticScope)||e.$scope&&t===e.$scope.parent||(e.$scope&&e.$scope.dispose("hoc"),t=new R.Scope(s||{},T({autoDestroy:"inherit",key:p,parent:t},i)),e.$scope=t,e.$scope&&e.$scope.retain("hoc")),O.a.createElement(D,{value:e.$scope},O.a.createElement(o,l()({},e.props,{ref:e.props.forwardedRef,$actions:e.$scope.actions,$scope:e.$scope,$stores:e.$scope.stores})))}))}}]),t}(O.a.Component);c._originComponent=o._originComponent||o,c.displayName=A.rs+p;var a=O.a.forwardRef((function(e,t){return O.a.createElement(c,l()({},e,{forwardedRef:t}))}));return a.displayName=A.rs+p,a._originComponent=o,a}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(!t[0]||q(t[0]))&&t.shift(),r=(!t[0]||w.a.array(t[0]))&&t.shift()||[];if(!r.length)for(r=[];w.a.string(t[0]);)r.push(t.shift());var s=(!t[0]||R.Scope.isScope(t[0]))&&t.shift(),i=(!t[0]||t[0]instanceof U)&&t.shift()||{};if(!o)return function(e){return I(e,r,s,i)};var p=o.displayName||o.name,c=r.map(E),a=function(e){function t(e){var n;return d()(this,t),n=S()(this,v()(t).apply(this,arguments)),e.$scope?e.$scope.wait("Comp init"):console.error("RS.fromProps without $scope"),n}return C()(t,e),$()(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return function(e,t){for(var n in e)if(!(n in t))return!0;for(var o in t)if(e[o]!==t[o])return!0;return!1}(e,this.props)}},{key:"render",value:function(){var e=this.props;return c.forEach((function(t){k(e,t.pathFrom)!==k(e.$scope.state,t.pathTo)&&(e.$scope.state[t.pathTo[0]]=function e(t,n,o,r){return w.a.string(n)&&(n=n.split(".")),n.length?1==n.length?(t[n[0]]=r?[].concat(u()(t[n[0]]||[]),[o]):o,t):e(t[n[0]]=t[n[0]]||{},n.slice(1),o,r)&&t||t:o}({},t.pathTo.slice(1),k(e,t.pathFrom)))})),this._firstRender||(this._firstRender=!0,e.$scope.release("Comp init")),O.a.createElement(o,l()({},e,{ref:e.forwardedRef}))}}]),t}(O.a.Component);a._originComponent=o._originComponent||o,a.defaultProps=T({},o.defaultProps||{}),a.displayName=A.fromProps+p;var f=O.a.forwardRef((function(e,t){return O.a.createElement(a,l()({},e,{forwardedRef:t}))}));return f.displayName=A.fromProps+p,f._originComponent=o,f=(s||!o._originComponent)&&z(!w.a.fn(s)&&s)(f)||f}function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=(!t[0]||q(t[0]))&&t.shift(),s=(!t[0]||R.Store.isStore(t[0]))&&t.shift()||R.Store,i=(!t[0]||w.a.string(t[0]))&&t.shift()||s.displayName||"props",p=(!t[0]||t[0]instanceof U)&&t.shift()||{},c=(!t[0]||R.Scope.isScope(t[0]))&&t.shift();if(!o)return function(e){return L(e,s,i,p,c)};var a=o.displayName||o.name,u=function(e){function t(){return d()(this,t),S()(this,v()(t).apply(this,arguments))}return C()(t,e),$()(t,[{key:"componentWillUnmount",value:function(){this.$scope&&this.$scope.dispose("hoc")}},{key:"render",value:function(){var e=this;return O.a.createElement(M,null,(function(t){return!(t=c||e.props.$scope||t||R.Store.staticScope)||e.$scope&&t===e.$scope.parent||(e.$scope&&e.$scope.dispose("hoc"),t=new R.Scope(r()({},i,s),T({autoDestroy:"inherit",key:a,parent:t},p)),e.$scope=t,e.$scope&&e.$scope.retain("hoc")),O.a.createElement(D,{value:e.$scope},O.a.createElement(o,l()({},e.props,{ref:e.props.forwardedRef,$dispatch:e.$scope.dispatch,$actions:e.$scope.actions,$scope:e.$scope,$stores:e.$scope.stores})))}))}}]),t}(O.a.Component);u._originComponent=o._originComponent||o,u.displayName=A.fromProps+a;var f=O.a.forwardRef((function(e,t){return O.a.createElement(u,l()({},e,{forwardedRef:t}))}));return f.displayName=A.fromProps+a,f._originComponent=o,f=(c||!o._originComponent)&&z(!w.a.fn(c)&&c)(f)||f}z.withScope=z,z.toState=B,z.scopeToState=B,z.scopeToProps=F,z.toProps=F,z.connect=F,z.propsToScope=I,z.fromProps=I,z.propsToStore=L,z.Store=R.Store,z.Scope=R.Scope;var G=j.a.asStore,H=j.a.asScope,J=j.a.asRef,K=j.a.withStateMap;z.store=G,z.scope=H,z.ref=J,z.asStore=G,z.asScope=H,z.asRef=J,z.withStateMap=K},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t,n){e.exports=n(16)},function(e,t,n){"use strict";n.r(t);var o=n(1);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var s=n(12);n.d(t,"RS",(function(){return s.a})),n.d(t,"reScope",(function(){return s.l})),n.d(t,"withScope",(function(){return s.t})),n.d(t,"scopeToState",(function(){return s.p})),n.d(t,"toState",(function(){return s.s})),n.d(t,"scopeToProps",(function(){return s.o})),n.d(t,"toProps",(function(){return s.r})),n.d(t,"connect",(function(){return s.g})),n.d(t,"propsToScope",(function(){return s.j})),n.d(t,"fromProps",(function(){return s.i})),n.d(t,"propsToStore",(function(){return s.k})),n.d(t,"Store",(function(){return s.c})),n.d(t,"Scope",(function(){return s.b})),n.d(t,"asStore",(function(){return s.f})),n.d(t,"asScope",(function(){return s.e})),n.d(t,"asRef",(function(){return s.d})),n.d(t,"withStateMap",(function(){return s.u})),n.d(t,"store",(function(){return s.q})),n.d(t,"scope",(function(){return s.n})),n.d(t,"ref",(function(){return s.m})),t.default=s.h}]);
//# sourceMappingURL=react-scopes.js.map